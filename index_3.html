<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>News</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      padding: 0;
      background-color: #f4f4f4;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 5px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      position: relative;
    }
    .news-item {
      border-bottom: 1px solid #ddd;
      padding: 10px 0;
    }
    .news-item:last-child {
      border-bottom: none;
    }
    .loading {
      text-align: center;
      font-size: 16px;
      color: gray;
      margin-top: 20px;
    }
    /* Preferences Modal Styles */
    .modal {
      display: none; /* Hidden by default */
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.5); /* Black with opacity */
    }
    .modal-content {
      background-color: #fff;
      margin: 10% auto;
      padding: 20px;
      border-radius: 5px;
      width: 90%;
      max-width: 400px;
      position: relative;
    }
    .modal-header {
      margin-bottom: 15px;
    }
    .modal-header h2 {
      margin: 0;
    }
    .modal-body label {
      display: block;
      margin-bottom: 5px;
    }
    .modal-body input[type="range"] {
      width: 100%;
      margin-bottom: 5px;
    }
    .modal-body span {
      display: inline-block;
      margin-bottom: 15px;
      font-weight: bold;
    }
    .modal-footer {
      text-align: right;
    }
    .modal-footer button {
      padding: 8px 16px;
      margin-left: 10px;
    }
    /* Reset Preferences Button */
    #reset-preferences {
      position: absolute;
      top: 20px;
      right: 20px;
      background-color: #007BFF;
      color: #fff;
      border: none;
      padding: 8px 12px;
      border-radius: 3px;
      cursor: pointer;
    }
    #reset-preferences:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
  
  <div class="container">
    <button id="reset-preferences">Set Preferences</button>
    <h2>Latest News</h2>
    <div id="news-container"></div>
    <div id="loading" class="loading">Loading more news...</div>
  </div>

  <!-- Preferences Modal -->
  <div id="preferences-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Set Your Preferences</h2>
      </div>
      <div class="modal-body">
        <label for="importance-slider">Article Importance (1-10)</label>
        <input type="range" id="importance-slider" min="1" max="10" value="5" />
        <span id="importance-value">5</span>
        
        <label for="positivity-slider">Article Positivity (1-10)</label>
        <input type="range" id="positivity-slider" min="1" max="10" value="5" />
        <span id="positivity-value">5</span>
      </div>
      <div class="modal-footer">
        <button id="save-preferences">Save</button>
      </div>
    </div>
  </div>

  <script>
    // Simulated news data; each article has title, content, importance, and positivity.
    const newsData = [{"title":"Lý do ông Trump muốn gặp thượng đỉnh ông Putin ở Arab Saudi","content":"Ông Trump muốn gặp thượng đỉnh ông Putin ở Arab Saudi vì quốc gia này duy trì quan hệ tốt với cả Mỹ và Nga, và đã từng giúp hai bên trao đổi tù nhân thành công. Ông Trump cho biết cuộc gặp có thể diễn ra trong tương lai gần, nhằm thảo luận về hòa bình ở Ukraine. Arab Saudi được xem là lựa chọn lý tưởng, vì họ giữ lập trường trung lập trong cuộc xung đột và không tham gia vào các lệnh trừng phạt đối với Nga. Ngoài ra, Arab Saudi cũng có kinh nghiệm trong việc giải quyết các cuộc xung đột ở khu vực.","positivity":7,"importance":9},{"title":"Cuộc sống như nô lệ của lao động người Việt trong trại cần sa Anh","content":"Cuộc sống của lao động người Việt trong trại cần sa ở Anh như nô lệ, với nhiều người bị ép buộc làm việc trong điều kiện khắc nghiệt và bị đe dọa tính mạng nếu không hoàn thành công việc. Nhiều người, như Xuan, đã rơi vào tình trạng này do nợ nần và bị cuốn vào các đường dây buôn người. Theo thống kê, số lượng người Việt di cư trái phép vào Anh đã tăng mạnh, và họ thường trở thành nạn nhân của \"chế độ nô lệ hiện đại\". Các tổ chức như Salvation Army đã hỗ trợ nhiều nạn nhân, nhưng vẫn còn nhiều người sống trong cảnh lao động cưỡng bức. Chính phủ Anh và Việt Nam đã ký kết thỏa thuận hợp tác nhằm ngăn chặn tình trạng này.","positivity":3,"importance":8},{"title":"Ukraine sản xuất vũ khí 'nhanh hơn phần còn lại của châu Âu'","content":"Ukraine đang sản xuất vũ khí nhanh hơn bất kỳ quốc gia nào ở châu Âu, theo nhận định của Thủ tướng Đan Mạch Mette Frederiksen tại Hội nghị An ninh Munich. Bà cảnh báo rằng châu Âu cần phải cải thiện quy trình sản xuất vũ khí để đảm bảo an ninh, khi mà Ukraine đã sản xuất khoảng 30% thiết bị quân sự bằng sản phẩm nội địa trong năm 2024. Trong gần ba năm xung đột, Ukraine đã gia tăng sản xuất các loại vũ khí như tên lửa, lựu pháo và drone, thậm chí vượt qua một số nước châu Âu trong lĩnh vực này.","positivity":5,"importance":8},{"title":"Đảng cực hữu Đức kêu gọi thiết lập 'quan hệ rất tốt' với Nga","content":"Đảng cực hữu AfD của Đức, do Alice Weidel lãnh đạo, đang kêu gọi chính phủ Berlin thiết lập \"quan hệ rất tốt\" với Nga, cho rằng các biện pháp trừng phạt hiện tại chỉ mang lại rắc rối cho nước Đức. Trong bối cảnh cử tri ủng hộ AfD gia tăng, Weidel nhấn mạnh tầm quan trọng của việc khôi phục mối quan hệ vì lợi ích kinh tế, đồng thời chỉ trích các chính sách hiện tại đã làm tổn hại đến nền kinh tế và an ninh năng lượng của Đức. Bà cũng kêu gọi Đức tham gia vào các nỗ lực hòa đàm nhằm chấm dứt xung đột tại Ukraine.","positivity":4,"importance":8},{"title":"Điện Kremlin nói có thể tiếp đón ông Trump bất cứ lúc nào","content":"Điện Kremlin đã thông báo rằng họ có thể tiếp đón Tổng thống Mỹ Donald Trump bất kỳ lúc nào, sau khi ông Trump bày tỏ khả năng gặp gỡ Tổng thống Nga Vladimir Putin. Phát ngôn viên Dmitry Peskov nhấn mạnh tầm quan trọng của việc chuẩn bị kỹ lưỡng cho các cuộc họp giữa hai lãnh đạo và kêu gọi Washington dỡ bỏ các lệnh trừng phạt đối với Nga. Ông Peskov cũng cho biết cuộc điện đàm gần đây giữa hai bên là một tín hiệu tích cực cho việc giải quyết vấn đề thông qua đối thoại, đặc biệt là trong bối cảnh đàm phán hòa bình tại Ukraine.","positivity":6,"importance":8},{"title":"Lính Ukraine bị chê lãng phí vũ khí phương Tây","content":"Lính Ukraine đang bị chỉ trích vì lãng phí vũ khí và trang bị quân sự đắt tiền nhận từ phương Tây, như tên lửa NLAW và Javelin. Các binh sĩ Anh huấn luyện Ukraine cho biết họ thường sử dụng NLAW như thể nó là vũ khí rẻ tiền và đã nhiều lần bỏ lại các tổ hợp Javelin trên chiến trường. Điều này dẫn đến việc Nga thu được nhiều vũ khí hiện đại, trong khi các phương pháp huấn luyện của NATO lại không hoàn toàn phù hợp với thực tế tác chiến của Ukraine. Nhiều sĩ quan Ukraine cũng phản ánh về hiệu quả thấp của việc huấn luyện này.","positivity":4,"importance":7},{"title":"Lao động nhập cư thấp thỏm vì chiến dịch trục xuất của ông Trump","content":"Nhiều lao động nhập cư hợp pháp tại Mỹ đang sống trong lo sợ do chiến dịch trục xuất của Tổng thống Donald Trump, dẫn đến việc họ hạn chế ra ngoài và xin nghỉ việc, gây khó khăn cho các doanh nghiệp. Chiến dịch này không chỉ ảnh hưởng đến người nhập cư trái phép mà còn làm cho những người có giấy tờ hợp pháp cũng cảm thấy bất an. Các ngành nghề như xây dựng và dịch vụ ăn uống đang phải đối mặt với tình trạng thiếu hụt lao động nghiêm trọng, điều này có thể tác động đến khả năng hoàn thành dự án và làm tăng chi phí lao động.","positivity":3,"importance":8},{"title":"Khoảnh khắc 'người rừng' Brazil học cách dùng bật lửa","content":"Một thanh niên thuộc bộ tộc bản địa sống biệt lập trong rừng Amazon đã lần đầu tiên đến ngôi làng Bela Rosa và được hướng dẫn cách sử dụng bật lửa. Tuy nhiên, anh không thành công trong việc quẹt lửa do chưa từng tiếp xúc với nền văn minh bên ngoài. Sau khi được ăn cá và kiểm tra sức khỏe bởi Tổ chức Bảo vệ Quyền và Văn hóa người bản địa Brazil (Funai), thanh niên này đã quay trở lại rừng sau chưa đầy 24 tiếng tiếp xúc với cộng đồng. Bộ tộc của anh đang đối mặt với nguy cơ xâm chiếm đất đai và xung đột với các cộng đồng lân cận.","positivity":6,"importance":7},{"title":"Châu Âu hôm nay họp khẩn về Ukraine","content":"Châu Âu hôm nay tổ chức cuộc họp khẩn tại Paris do Tổng thống Pháp Emmanuel Macron chủ trì, nhằm thảo luận về tình hình Ukraine. Cuộc họp diễn ra sau khi quan chức Mỹ cho biết châu Âu sẽ không tham gia vào các cuộc đàm phán chấm dứt xung đột, điều này khiến châu Âu lo ngại về vai trò của Mỹ trong vấn đề Ukraine. Các lãnh đạo từ Đức, Anh, Italy, Ba Lan, Tây Ban Nha, Hà Lan và Đan Mạch sẽ tham gia, cùng với lãnh đạo các cơ quan châu Âu và NATO. Điều này phản ánh sự cần thiết của châu Âu trong việc thống nhất và tăng cường an ninh chung trước các diễn biến nhanh chóng từ Mỹ và Nga.","positivity":4,"importance":8},{"title":"Thủ tướng Anh: Sẵn sàng gửi quân đến Ukraine để đảm bảo an ninh","content":"Thủ tướng Anh Keir Starmer đã tuyên bố rằng ông sẵn sàng gửi quân đội đến Ukraine nếu cần thiết để đảm bảo an ninh cho quốc gia này và châu Âu. Ông nhấn mạnh vai trò của Anh trong việc hỗ trợ quân đội Ukraine và cam kết viện trợ 3 tỷ bảng Anh mỗi năm cho đến năm 2030. Starmer cũng cho biết sẽ tham dự cuộc họp cấp cao tại Paris để giải quyết các lo ngại về nỗ lực đàm phán hòa bình giữa Mỹ và Nga mà không có sự tham gia của Ukraine. Ông cảnh báo rằng tình hình an ninh hiện tại không chỉ ảnh hưởng đến Ukraine mà còn đến toàn bộ châu Âu.","positivity":6,"importance":9},{"title":"Ukraine nói Nga gia tăng sức ép ở mặt trận Donetsk","content":"Quân đội Ukraine thông báo rằng lực lượng Nga đang gia tăng sức ép tại mặt trận Donetsk, đặc biệt là gần thành phố Pokrovsk, với 261 cuộc giao tranh được ghi nhận trong một ngày, con số cao nhất trong năm 2025. Tổng thống Zelensky cho biết Nga đã thả 1.220 quả bom và phóng 40 tên lửa vào Ukraine trong tuần qua. Tình hình tại Pokrovsk ngày càng căng thẳng khi quân đội Nga kiểm soát các khu vực xung quanh, đe dọa đến các tuyến tiếp vận của Ukraine. Nếu Nga kiểm soát được Pokrovsk, điều này sẽ làm suy yếu đáng kể khả năng phòng thủ của Ukraine tại tỉnh Donetsk.","positivity":4,"importance":8},{"title":"Tổng thống Trump nói sẽ 'rất sớm' gặp ông Putin","content":"Tổng thống Donald Trump đã thông báo rằng ông sẽ gặp Tổng thống Nga Vladimir Putin \"rất sớm\" để thảo luận về việc chấm dứt xung đột tại Ukraine, tuy nhiên không đưa ra thời gian cụ thể cho cuộc gặp. Ông Trump cho biết nhóm của ông đã có các cuộc thảo luận \"kéo dài và khó khăn\" với phía Nga, và bày tỏ niềm tin rằng cả ông Putin và Tổng thống Ukraine Volodymyr Zelensky đều muốn kết thúc chiến sự. Ngoài ra, cuộc đàm phán giữa phái đoàn Nga và Mỹ dự kiến sẽ diễn ra tại Riyadh, Arab Saudi vào ngày 18/2. Tổng thống Zelensky đã nhấn mạnh rằng Ukraine không được mời tham dự cuộc họp cấp cao này.","positivity":7,"importance":9},{"title":"Mỹ công bố ảnh tàu sân bay rách đuôi sau vụ va chạm tàu hàng","content":"Mỹ vừa công bố hình ảnh cho thấy vết rách ở đuôi tàu sân bay USS Harry S. Truman sau vụ va chạm với tàu hàng ngoài khơi Ai Cập vào đêm 12/2. Tàu đã cập cảng tại Hy Lạp để tiến hành sửa chữa hư hỏng, trong khi vẫn duy trì khả năng tác chiến và tổ chức các chuyến bay bình thường. Hải quân Mỹ khẳng định vụ va chạm không gây ra thiệt hại nghiêm trọng và không làm ảnh hưởng đến lò phản ứng hạt nhân của tàu. Các tàu hộ tống vẫn tiếp tục thực hiện nhiệm vụ trong thời gian sửa chữa.","positivity":6,"importance":8},{"title":"Châu Âu âm thầm lên kế hoạch cho Ukraine hậu xung đột","content":"Châu Âu đang âm thầm lên kế hoạch triển khai lực lượng quân đội tới Ukraine sau khi xung đột với Nga kết thúc, nhằm đảm bảo an ninh cho nước này. Các lãnh đạo châu Âu lo ngại về việc Mỹ có thể thay đổi ưu tiên và không tham gia vào các cuộc đàm phán hòa bình, do đó họ nhấn mạnh rằng châu Âu cũng cần được tham gia. Tuy nhiên, chi tiết cụ thể về kế hoạch còn hạn chế và phụ thuộc vào các điều khoản thỏa thuận hòa bình. Tổng thống Ukraine Volodymyr Zelensky yêu cầu đảm bảo an ninh cho đất nước mình, trong khi châu Âu đối mặt với nhiều thách thức trong việc triển khai một lực lượng quân sự lớn.","positivity":4,"importance":8},{"title":"Cách gia đình ông Trump kiếm tiền sau chiến thắng bầu cử","content":"Sau khi ông Trump đắc cử, gia đình ông đã tìm kiếm nhiều cơ hội kinh doanh và thu lợi từ các vụ dàn xếp kiện tụng. Đệ nhất phu nhân Melania Trump đã ký hợp đồng với Amazon để phát sóng bộ phim tài liệu về cuộc sống của mình, thu về 40 triệu USD, trong đó bà có thể nhận tới 70%. Gia đình Trump cũng đã nhận khoảng 80 triệu USD từ các công ty khác để giải quyết các vụ kiện trước đây, trong khi con trai ông, Donald Trump Jr., tích cực tham gia vào các dự án đầu tư và kinh doanh mới. Ngoài ra, ông Trump cũng đã bắt đầu tham gia lĩnh vực tiền điện tử, với việc ra mắt đồng tiền meme $TRUMP.","positivity":6,"importance":8},{"title":"Ông Zelensky: Ukraine không được mời họp cùng Mỹ - Nga","content":"Tổng thống Ukraine Volodymyr Zelensky cho biết Ukraine không được mời tham gia cuộc họp giữa Mỹ và Nga sắp diễn ra tại Arab Saudi để bàn về giải pháp cho xung đột. Ông nhấn mạnh rằng việc tổ chức cuộc họp này mà không có sự tham gia của Ukraine là điều kỳ lạ, và cho rằng Nga không phải là đối tác chiến lược của Ukraine. Zelensky cũng cảnh báo rằng Nga có thể mở rộng cuộc chiến nếu liên minh NATO suy yếu, đồng thời nhấn mạnh rằng mọi thỏa thuận hòa bình phải có sự tham gia của Ukraine.","positivity":3,"importance":8},{"title":"Ngoại trưởng Mỹ chỉ trích Iran gây bất ổn Trung Đông","content":"Ngoại trưởng Mỹ Marco Rubio đã chỉ trích Iran là \"nguồn gây bất ổn lớn nhất ở Trung Đông\" trong một cuộc họp báo với Thủ tướng Israel Benjamin Netanyahu. Ông khẳng định rằng Washington sẽ không cho phép Tehran sở hữu vũ khí hạt nhân và nhấn mạnh rằng Iran đứng sau nhiều hành động bạo lực và gây bất ổn trong khu vực. Thủ tướng Netanyahu cũng đồng tình với quan điểm này, cho rằng Israel và Mỹ cần hợp tác để đối phó với mối đe dọa từ Iran.","positivity":3,"importance":8},{"title":"Nhà Trắng hối thúc Boeing giao chuyên cơ mới cho ông Trump","content":"Nhà Trắng đã hối thúc Boeing tăng tốc giao chuyên cơ mới cho Tổng thống Donald Trump, sau khi giới chức chỉ trích sự chậm trễ trong tiến độ lắp ráp máy bay Không lực Một đời mới. Dự kiến, hai máy bay VC-25B dựa trên mẫu 747-8 sẽ được bàn giao vào tháng 12/2024, nhưng thời gian này đã bị hoãn đến năm 2027 hoặc 2028. Tổng thống Trump đã thể hiện sự không hài lòng với tiến độ chậm chạp của Boeing và đã từng gây áp lực để giảm chi phí dự án.","positivity":4,"importance":8},{"title":"Thành phố Argentina gây tranh cãi vì kế hoạch triệt sản capybara","content":"Thành phố Nordelta ở Argentina đang gây tranh cãi với kế hoạch triệt sản và sử dụng thuốc tránh thai để kiểm soát số lượng capybara, loài động vật được yêu thích. Chính quyền địa phương cho biết số lượng capybara đã gia tăng quá mức, dẫn đến các vấn đề như xung đột với chó và tai nạn giao thông. Tuy nhiên, nhiều cư dân và nhà bảo vệ môi trường phản đối kế hoạch này, cho rằng cần thiết lập các khu vực bảo tồn và hành lang sinh học thay vì triệt sản. Capybara là loài gặm nhấm lớn nhất thế giới, nổi tiếng với tính dễ gần và khả năng sống hòa hợp với nhiều loài động vật khác.","positivity":4,"importance":6},{"title":"Những chính sách nguy cơ châm ngòi bất ổn kinh tế của ông Trump","content":"Tổng thống Donald Trump đã triển khai nhiều chính sách nhằm làm cho nước Mỹ \"vĩ đại trở lại\", nhưng những động thái này tiềm ẩn nguy cơ bất ổn kinh tế. Việc áp thuế với Canada, Mexico và Trung Quốc đã gây phản ứng tiêu cực trên thị trường và có thể dẫn đến lạm phát tăng. Chính sách trục xuất người nhập cư trái phép cũng làm giảm nguồn lao động, ảnh hưởng đến nhiều doanh nghiệp. Hơn nữa, việc cắt giảm viên chức liên bang có thể tạo ra tình trạng thất nghiệp gia tăng và tác động tiêu cực đến nền kinh tế trong tương lai.","positivity":4,"importance":8},{"title":"Israel nhận gần 2.000 quả bom tấn được ông Trump phê duyệt","content":"Israel đã nhận gần 2.000 quả bom hạng nặng Mark 84 sau khi Tổng thống Trump gỡ bỏ lệnh cấm do chính quyền Biden áp đặt. Lô hàng đầu tiên bao gồm 1.800 quả bom đã được chuyển đến các căn cứ không quân. Bộ trưởng Quốc phòng Israel, Israel Katz, cho rằng đây là một khí tài quan trọng và cảm ơn Tổng thống Trump vì đã đảm bảo an ninh cho Israel. Việc chuyển giao diễn ra trong bối cảnh lệnh ngừng bắn giữa Israel và Hamas đang đứng trước nguy cơ sụp đổ.","positivity":4,"importance":8},{"title":"Ba Lan bác khả năng thành lập 'quân đội châu Âu'","content":"Ngoại trưởng Ba Lan, Radoslaw Sikorski, đã bác bỏ khả năng thành lập \"quân đội châu Âu\" như lời kêu gọi của Tổng thống Ukraine, Volodymyr Zelensky. Ông nhấn mạnh rằng việc hợp nhất quân đội các quốc gia châu Âu sẽ không xảy ra và khuyến nghị cần thận trọng với khái niệm này. Ba Lan cam kết bảo vệ lãnh thổ của mình trong khuôn khổ NATO và không xem xét việc triển khai lực lượng đến Ukraine.","positivity":4,"importance":7},{"title":"Cựu tổng thống Philippines đùa 'đánh bom, giết 15 thượng nghị sĩ'","content":"Cựu tổng thống Philippines Rodrigo Duterte đã gây tranh cãi khi đùa rằng cần \"đánh bom, giết 15 thượng nghị sĩ\" để đảm bảo chiến thắng cho các ứng viên ông ủng hộ trong cuộc bầu cử sắp tới. Phát biểu này được đưa ra tại một sự kiện vận động tranh cử ở Manila vào ngày 13/2 và đã khiến ông nhận nhiều chỉ trích từ các chính trị gia đối lập, bao gồm Tổng thống Ferdinand Marcos Jr. và các nghị sĩ khác. Những người này cho rằng lời nói của Duterte có thể gây ra sự đe dọa và cần được điều tra.","positivity":2,"importance":7}];
    let currentIndex = 0;
    const pageSize = 10;
    let isLoading = false;
    
    // Return filtered news based on saved user preferences.
    function getFilteredNewsData() {
      const stored = localStorage.getItem("newsPreferences");
      if (stored) {
        const prefs = JSON.parse(stored);
        return newsData.filter(item => {
          return item.importance >= prefs.importance && item.positivity >= prefs.positivity;
        });
      }
      return newsData;
    }
    
    // Load more news items with infinite scroll and filtering.
    function loadMoreNews() {
      if (isLoading) return;
      isLoading = true;
      document.getElementById("loading").style.display = "block";

      setTimeout(() => {
        const newsContainer = document.getElementById("news-container");
        const filteredNews = getFilteredNewsData();
        const nextBatch = filteredNews.slice(currentIndex, currentIndex + pageSize);

        // If no articles match the filter, display a message.
        if (filteredNews.length === 0 && currentIndex === 0) {
          newsContainer.innerHTML = "<p>No articles match your preferences.</p>";
          document.getElementById("loading").style.display = "none";
          window.removeEventListener("scroll", handleScroll);
          isLoading = false;
          return;
        }

        nextBatch.forEach(item => {
          const newsItem = document.createElement("div");
          newsItem.classList.add("news-item");
          newsItem.innerHTML = `<h3>${item.title}</h3><p>${item.content}</p>`;
          newsContainer.appendChild(newsItem);
        });

        currentIndex += pageSize;
        isLoading = false;

        if (currentIndex >= filteredNews.length) {
          document.getElementById("loading").style.display = "none";
          window.removeEventListener("scroll", handleScroll);
        }
      }, 1000); // Simulating a delay
    }

    function handleScroll() {
      if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 200) {
        loadMoreNews();
      }
    }

    // Refresh the news list when preferences change.
    function refreshNews() {
      currentIndex = 0;
      document.getElementById("news-container").innerHTML = "";
      document.getElementById("loading").style.display = "block";
      window.addEventListener("scroll", handleScroll);
      loadMoreNews();
    }

    // Load initial news items.
    loadMoreNews();
    window.addEventListener("scroll", handleScroll);

    // Preferences Modal Logic
    const preferencesModal = document.getElementById("preferences-modal");
    const importanceSlider = document.getElementById("importance-slider");
    const positivitySlider = document.getElementById("positivity-slider");
    const importanceValue = document.getElementById("importance-value");
    const positivityValue = document.getElementById("positivity-value");
    const savePreferencesBtn = document.getElementById("save-preferences");
    const resetPreferencesBtn = document.getElementById("reset-preferences");

    importanceSlider.addEventListener("input", () => {
      importanceValue.textContent = importanceSlider.value;
    });
    positivitySlider.addEventListener("input", () => {
      positivityValue.textContent = positivitySlider.value;
    });

    function showPreferencesModal() {
      preferencesModal.style.display = "block";
    }

    function hidePreferencesModal() {
      preferencesModal.style.display = "none";
    }

    // Save preferences and refresh the news list.
    function savePreferences() {
      const preferences = {
        importance: importanceSlider.value,
        positivity: positivitySlider.value,
        timestamp: new Date().getTime()
      };
      localStorage.setItem("newsPreferences", JSON.stringify(preferences));
      refreshNews();
    }

    // Load stored preferences (if available) and update the slider values.
    function loadPreferences() {
      const stored = localStorage.getItem("newsPreferences");
      if (stored) {
        const prefs = JSON.parse(stored);
        importanceSlider.value = prefs.importance;
        positivitySlider.value = prefs.positivity;
        importanceValue.textContent = prefs.importance;
        positivityValue.textContent = prefs.positivity;
        return true;
      }
      return false;
    }

    // After 20 seconds, if no preferences have been set, show the modal.
    window.addEventListener("load", () => {
      if (!loadPreferences()) {
        setTimeout(() => {
          if (!localStorage.getItem("newsPreferences")) {
            showPreferencesModal();
          }
        }, 20000);
      }
    });

    savePreferencesBtn.addEventListener("click", () => {
      savePreferences();
      hidePreferencesModal();
    });

    // Reset preferences, show the modal, and refresh news.
    resetPreferencesBtn.addEventListener("click", () => {
      showPreferencesModal();
    });

    // Allow closing the modal by clicking outside the modal content.
    window.addEventListener("click", (event) => {
      if (event.target == preferencesModal) {
        hidePreferencesModal();
      }
    });
  </script>
</body>
</html>